#!/bin/bash

set -e

cd "$(dirname "$0")"

time taskset -c 0-15 ../run.sh \
    ../data/customer.txt ../data/orders.txt ../data/lineitem.txt \
    29 \
    MACHINERY  1995-01-23 1994-02-24 5287 \
    FURNITURE  1998-07-29 1994-09-27 6999 \
    FURNITURE  1990-08-08 1990-04-10 6136 \
    MACHINERY  1993-12-04 1992-02-15 4683 \
    BUILDING   1997-10-25 1991-03-26 172 \
    HOUSEHOLD  1992-05-31 1990-06-11 6168 \
    AUTOMOBILE 1991-06-28 1990-05-18 1320 \
    BUILDING   1994-04-20 1993-07-22 4973 \
    AUTOMOBILE 1991-03-21 1990-07-12 1406 \
    MACHINERY  1994-12-30 1992-03-13 891 \
    MACHINERY  1996-08-20 1991-04-30 9260 \
    FURNITURE  1990-05-04 1990-04-30 2202 \
    AUTOMOBILE 1992-07-09 1990-10-17 2525 \
    FURNITURE  1997-06-23 1994-12-16 2973 \
    FURNITURE  1996-08-01 1992-12-25 9762 \
    BUILDING   1998-04-27 1996-02-01 589 \
    AUTOMOBILE 1998-03-30 1996-02-20 6195 \
    AUTOMOBILE 1992-01-22 1990-12-06 9061 \
    HOUSEHOLD  1996-08-16 1996-01-16 1159 \
    FURNITURE  1990-12-23 1990-10-20 1728 \
    FURNITURE  1995-02-14 1994-05-06 2884 \
    AUTOMOBILE 1994-12-30 1993-06-30 3077 \
    BUILDING   1995-10-24 1994-07-29 8620 \
    HOUSEHOLD  1993-03-18 1991-04-25 865 \
    HOUSEHOLD  1993-08-30 1990-03-21 1488 \
    HOUSEHOLD  1997-01-17 1994-02-02 5062 \
    MACHINERY  1997-11-26 1994-06-14 4860 \
    HOUSEHOLD  1996-09-17 1996-03-20 2149 \
    BUILDING   1991-09-04 1991-08-14 4537 \
    \
    >"$(basename "$0").stdout"

if [ -z "$BDCI19_SKIP_DIFF" ]; then
    echo
    diff "$(basename "$0").stdout" "$(basename "$0").result"
fi

