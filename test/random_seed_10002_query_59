#!/bin/bash

set -e

cd "$(dirname "$0")"

time taskset -c 0-15 ../run.sh \
    ../data/customer.txt ../data/orders.txt ../data/lineitem.txt \
    59 \
    BUILDING   1991-01-26 1990-01-14 5238 \
    AUTOMOBILE 1995-01-25 1991-05-15 4113 \
    FURNITURE  1996-05-04 1990-12-12 5821 \
    HOUSEHOLD  1997-04-11 1997-01-25 141 \
    HOUSEHOLD  1996-04-06 1994-12-12 2514 \
    MACHINERY  1990-07-27 1990-04-15 7406 \
    AUTOMOBILE 1992-08-11 1990-10-01 1647 \
    AUTOMOBILE 1995-09-28 1994-01-18 9238 \
    BUILDING   1993-01-12 1992-08-19 6205 \
    BUILDING   1991-05-27 1990-08-14 6577 \
    AUTOMOBILE 1990-12-29 1990-05-17 2800 \
    AUTOMOBILE 1991-11-29 1990-10-07 4994 \
    BUILDING   1993-10-07 1992-08-22 6255 \
    AUTOMOBILE 1992-12-06 1992-10-07 8331 \
    AUTOMOBILE 1994-11-08 1994-05-11 1840 \
    AUTOMOBILE 1993-04-06 1991-08-29 8384 \
    AUTOMOBILE 1992-01-01 1991-12-16 5629 \
    HOUSEHOLD  1995-08-19 1995-01-10 4374 \
    FURNITURE  1997-11-22 1997-04-08 6662 \
    MACHINERY  1999-06-13 1993-08-14 2611 \
    AUTOMOBILE 1993-01-13 1992-12-08 4256 \
    HOUSEHOLD  1993-10-07 1991-05-25 3348 \
    BUILDING   1992-08-26 1992-05-29 732 \
    MACHINERY  1990-03-11 1990-02-15 3944 \
    BUILDING   1995-03-19 1991-07-13 2382 \
    BUILDING   1998-06-18 1993-09-17 4425 \
    FURNITURE  1999-08-08 1997-03-04 7897 \
    FURNITURE  1990-10-08 1990-09-07 6837 \
    FURNITURE  1990-09-13 1990-02-06 7398 \
    FURNITURE  1990-03-15 1990-01-06 7183 \
    AUTOMOBILE 1991-07-09 1990-01-13 595 \
    BUILDING   1992-02-12 1990-03-23 3204 \
    FURNITURE  1994-02-17 1990-06-13 2028 \
    FURNITURE  1998-06-28 1995-04-15 837 \
    FURNITURE  1995-04-25 1995-03-25 4868 \
    BUILDING   1994-09-27 1990-09-13 7272 \
    FURNITURE  1995-08-11 1994-10-10 3954 \
    MACHINERY  1990-10-27 1990-05-17 7466 \
    HOUSEHOLD  1990-11-05 1990-04-06 3770 \
    AUTOMOBILE 1996-06-08 1993-07-04 7011 \
    HOUSEHOLD  1995-10-30 1992-04-09 8922 \
    AUTOMOBILE 1993-11-19 1990-05-14 1180 \
    HOUSEHOLD  1992-04-21 1992-04-14 806 \
    BUILDING   1999-03-01 1990-05-29 7992 \
    MACHINERY  1999-10-17 1997-01-27 8592 \
    BUILDING   1994-04-29 1991-03-08 3654 \
    HOUSEHOLD  1990-04-22 1990-01-15 9990 \
    HOUSEHOLD  1990-07-17 1990-01-21 6982 \
    HOUSEHOLD  1997-12-21 1993-04-27 8973 \
    HOUSEHOLD  1998-05-26 1996-08-16 5339 \
    MACHINERY  1992-12-19 1992-08-31 1965 \
    MACHINERY  1991-02-06 1990-12-07 7422 \
    FURNITURE  1997-03-31 1993-10-22 7774 \
    HOUSEHOLD  1992-02-04 1990-08-06 4693 \
    HOUSEHOLD  1991-05-31 1990-02-28 2302 \
    FURNITURE  1998-02-19 1991-10-02 6645 \
    FURNITURE  1995-08-04 1994-03-17 5564 \
    FURNITURE  1997-08-24 1996-09-30 4632 \
    BUILDING   1998-04-26 1996-08-23 5684 \
    \
    >"$(basename "$0").stdout"

if [ -z "$BDCI19_SKIP_DIFF" ]; then
    echo
    diff "$(basename "$0").stdout" "$(basename "$0").result"
fi

