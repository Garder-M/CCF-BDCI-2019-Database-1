#!/bin/bash

set -e

cd "$(dirname "$0")"

time taskset -c 0-15 ../run.sh \
    ../data/customer.txt ../data/orders.txt ../data/lineitem.txt \
    28 \
    HOUSEHOLD  1999-01-11 1992-09-05 4926 \
    MACHINERY  1990-11-18 1990-08-23 9864 \
    BUILDING   1992-12-17 1991-11-27 808 \
    MACHINERY  1999-09-25 1994-07-25 2660 \
    FURNITURE  1990-06-06 1990-03-31 5220 \
    AUTOMOBILE 1991-06-02 1991-01-17 2715 \
    MACHINERY  1993-10-16 1992-08-09 1743 \
    AUTOMOBILE 1997-07-31 1997-07-25 2728 \
    FURNITURE  1995-04-23 1994-02-24 5159 \
    AUTOMOBILE 1993-05-13 1990-10-28 8386 \
    AUTOMOBILE 1998-02-13 1995-04-14 171 \
    AUTOMOBILE 1995-10-22 1990-12-01 5984 \
    MACHINERY  1998-03-07 1990-06-08 1448 \
    FURNITURE  1990-05-27 1990-01-19 2327 \
    AUTOMOBILE 1998-10-21 1992-01-05 2515 \
    FURNITURE  1999-12-29 1995-05-12 6827 \
    BUILDING   1992-08-29 1992-04-08 591 \
    FURNITURE  1996-08-02 1990-11-20 6314 \
    MACHINERY  1991-09-11 1990-11-03 4200 \
    MACHINERY  1994-03-24 1991-07-29 9733 \
    MACHINERY  1999-04-08 1991-11-12 7373 \
    HOUSEHOLD  1994-05-19 1990-06-29 2394 \
    BUILDING   1992-05-11 1990-06-09 2829 \
    BUILDING   1995-03-30 1994-01-27 7275 \
    AUTOMOBILE 1991-08-03 1990-08-15 9586 \
    BUILDING   1998-04-16 1997-03-05 1698 \
    HOUSEHOLD  1997-05-08 1991-11-21 8594 \
    AUTOMOBILE 1995-04-18 1993-02-02 398 \
    \
    >"$(basename "$0").stdout"

if [ -z "$BDCI19_SKIP_DIFF" ]; then
    echo
    diff "$(basename "$0").stdout" "$(basename "$0").result"
fi

