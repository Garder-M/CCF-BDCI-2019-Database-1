#!/bin/bash

set -e

cd "$(dirname "$0")"

time taskset -c 0-15 ../run.sh \
    ../data/customer.txt ../data/orders.txt ../data/lineitem.txt \
    68 \
    HOUSEHOLD  1997-08-17 1996-01-26 9263 \
    AUTOMOBILE 1990-11-19 1990-03-12 5310 \
    FURNITURE  1993-05-22 1990-04-09 3074 \
    BUILDING   1992-03-09 1991-12-06 7404 \
    FURNITURE  1998-05-19 1993-12-20 8967 \
    HOUSEHOLD  1994-08-27 1992-07-04 1514 \
    BUILDING   1996-07-23 1994-10-30 863 \
    HOUSEHOLD  1998-06-18 1994-12-28 6287 \
    FURNITURE  1995-09-19 1993-07-27 5727 \
    FURNITURE  1999-05-11 1990-08-01 9747 \
    AUTOMOBILE 1995-02-13 1993-06-24 6373 \
    HOUSEHOLD  1997-03-18 1991-09-05 7722 \
    HOUSEHOLD  1995-10-30 1991-08-31 283 \
    AUTOMOBILE 1990-10-21 1990-07-12 175 \
    HOUSEHOLD  1990-08-05 1990-05-12 5126 \
    MACHINERY  1995-07-17 1991-08-01 6489 \
    BUILDING   1996-10-27 1992-12-03 8118 \
    BUILDING   1994-12-02 1990-03-16 3246 \
    MACHINERY  1993-04-04 1992-05-02 3355 \
    AUTOMOBILE 1996-05-18 1994-02-19 9622 \
    AUTOMOBILE 1999-04-10 1995-05-22 2606 \
    MACHINERY  1992-02-10 1991-09-28 2816 \
    BUILDING   1999-06-02 1993-12-05 6328 \
    MACHINERY  1991-04-12 1990-03-03 856 \
    AUTOMOBILE 1993-09-13 1990-07-24 6200 \
    MACHINERY  1997-02-07 1990-07-27 1969 \
    HOUSEHOLD  1991-02-15 1990-11-12 5255 \
    HOUSEHOLD  1999-07-25 1993-01-23 7109 \
    AUTOMOBILE 1997-01-31 1996-01-10 5474 \
    AUTOMOBILE 1992-01-26 1991-01-29 2151 \
    MACHINERY  1992-06-08 1990-04-06 2490 \
    FURNITURE  1997-09-25 1994-04-07 5897 \
    FURNITURE  1997-10-31 1991-08-23 9753 \
    BUILDING   1999-04-30 1990-08-16 884 \
    MACHINERY  1998-01-25 1991-03-04 6059 \
    MACHINERY  1994-05-01 1992-03-17 4707 \
    HOUSEHOLD  1995-08-28 1993-10-19 2632 \
    MACHINERY  1991-11-02 1991-05-27 9195 \
    AUTOMOBILE 1990-08-12 1990-05-22 5006 \
    MACHINERY  1995-01-25 1993-09-08 1122 \
    HOUSEHOLD  1993-01-06 1991-02-03 3208 \
    HOUSEHOLD  1993-06-15 1990-10-22 6634 \
    HOUSEHOLD  1990-02-04 1990-01-18 2622 \
    MACHINERY  1992-08-29 1990-01-21 5821 \
    AUTOMOBILE 1999-07-31 1992-01-14 8815 \
    FURNITURE  1993-10-10 1992-05-12 9137 \
    AUTOMOBILE 1991-03-17 1990-12-04 5690 \
    FURNITURE  1999-01-30 1995-11-19 884 \
    HOUSEHOLD  1996-02-21 1990-06-02 7603 \
    BUILDING   1997-03-08 1995-04-03 2778 \
    HOUSEHOLD  1994-04-19 1992-08-25 4434 \
    BUILDING   1999-06-17 1990-11-24 8462 \
    BUILDING   1994-02-18 1993-02-09 8439 \
    AUTOMOBILE 1990-08-20 1990-08-11 3360 \
    HOUSEHOLD  1993-02-09 1991-10-21 5660 \
    MACHINERY  1993-02-08 1990-06-08 7653 \
    MACHINERY  1991-02-26 1990-06-30 6701 \
    BUILDING   1998-05-10 1992-12-10 3339 \
    HOUSEHOLD  1994-02-22 1992-01-22 2525 \
    FURNITURE  1994-02-02 1990-03-08 1937 \
    FURNITURE  1994-06-01 1992-08-08 6932 \
    BUILDING   1992-04-19 1991-01-11 8062 \
    BUILDING   1998-06-08 1996-11-19 2357 \
    FURNITURE  1999-11-26 1995-12-23 1215 \
    MACHINERY  1991-03-17 1990-05-21 942 \
    BUILDING   1992-07-01 1990-01-01 9142 \
    MACHINERY  1993-04-26 1990-01-16 5665 \
    BUILDING   1994-01-15 1990-06-13 6865 \
    \
    >"$(basename "$0").stdout"

if [ -z "$BDCI19_SKIP_DIFF" ]; then
    echo
    diff "$(basename "$0").stdout" "$(basename "$0").result"
fi

