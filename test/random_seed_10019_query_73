#!/bin/bash

set -e

cd "$(dirname "$0")"

time taskset -c 0-15 ../run.sh \
    ../data/customer.txt ../data/orders.txt ../data/lineitem.txt \
    73 \
    HOUSEHOLD  1990-10-18 1990-07-19 4033 \
    MACHINERY  1991-11-10 1990-12-16 830 \
    MACHINERY  1993-09-14 1990-11-30 5337 \
    HOUSEHOLD  1994-03-21 1993-10-14 4221 \
    MACHINERY  1998-01-10 1997-08-26 6308 \
    FURNITURE  1992-01-24 1991-08-29 6213 \
    BUILDING   1993-07-01 1992-12-20 4574 \
    HOUSEHOLD  1994-08-20 1994-04-13 5461 \
    AUTOMOBILE 1994-03-09 1992-07-23 5858 \
    BUILDING   1993-06-21 1990-04-11 8563 \
    AUTOMOBILE 1999-01-08 1993-10-24 6775 \
    HOUSEHOLD  1998-12-20 1991-03-03 3165 \
    AUTOMOBILE 1997-09-26 1991-03-10 4946 \
    HOUSEHOLD  1992-11-23 1991-06-28 1972 \
    MACHINERY  1997-05-18 1992-12-06 4283 \
    AUTOMOBILE 1993-06-30 1991-05-04 2364 \
    BUILDING   1993-05-13 1993-03-18 9674 \
    HOUSEHOLD  1990-02-04 1990-01-27 904 \
    FURNITURE  1999-09-04 1991-09-26 7341 \
    HOUSEHOLD  1991-09-30 1990-08-29 3286 \
    AUTOMOBILE 1990-10-03 1990-03-13 2528 \
    AUTOMOBILE 1997-08-06 1997-03-28 5454 \
    MACHINERY  1993-08-09 1992-07-02 8295 \
    MACHINERY  1998-04-01 1997-04-30 2389 \
    MACHINERY  1995-05-30 1994-02-26 2727 \
    AUTOMOBILE 1995-07-13 1993-09-19 6101 \
    BUILDING   1994-01-27 1992-02-03 8405 \
    BUILDING   1991-04-16 1990-05-09 1254 \
    AUTOMOBILE 1993-10-03 1993-06-03 1476 \
    MACHINERY  1992-04-18 1991-12-30 8675 \
    HOUSEHOLD  1992-05-29 1991-08-17 9075 \
    FURNITURE  1995-08-27 1994-08-19 7009 \
    MACHINERY  1995-06-17 1991-10-30 8444 \
    MACHINERY  1994-04-10 1991-07-06 7629 \
    FURNITURE  1998-07-26 1992-02-15 7900 \
    AUTOMOBILE 1999-11-29 1994-02-20 8219 \
    BUILDING   1996-06-30 1990-11-18 916 \
    BUILDING   1992-09-25 1990-06-15 6608 \
    MACHINERY  1996-12-05 1993-05-28 4381 \
    HOUSEHOLD  1994-04-07 1994-01-27 9480 \
    FURNITURE  1996-04-23 1994-08-20 2659 \
    FURNITURE  1991-10-13 1991-09-30 7800 \
    FURNITURE  1997-04-28 1990-12-28 5570 \
    MACHINERY  1992-07-04 1990-07-25 2901 \
    FURNITURE  1994-06-12 1993-10-25 3911 \
    MACHINERY  1998-04-06 1991-03-29 4176 \
    AUTOMOBILE 1997-03-11 1996-12-05 330 \
    MACHINERY  1992-07-23 1990-11-17 876 \
    AUTOMOBILE 1998-04-29 1992-06-18 2366 \
    BUILDING   1990-03-11 1990-01-03 8569 \
    MACHINERY  1992-10-23 1990-08-08 1633 \
    AUTOMOBILE 1991-05-25 1991-02-12 2035 \
    MACHINERY  1992-09-17 1992-07-13 5369 \
    BUILDING   1993-04-18 1990-04-24 4459 \
    AUTOMOBILE 1996-10-05 1996-02-13 3701 \
    HOUSEHOLD  1994-04-26 1994-03-10 8160 \
    HOUSEHOLD  1993-12-17 1991-04-01 2531 \
    HOUSEHOLD  1994-01-08 1992-01-03 9538 \
    FURNITURE  1998-02-10 1995-10-10 2889 \
    FURNITURE  1998-07-13 1991-02-06 602 \
    FURNITURE  1999-03-05 1997-10-02 260 \
    HOUSEHOLD  1990-01-09 1990-01-08 3860 \
    BUILDING   1996-05-14 1995-03-14 7737 \
    FURNITURE  1997-04-15 1991-08-31 1944 \
    BUILDING   1997-07-07 1997-06-08 3017 \
    AUTOMOBILE 1994-06-12 1992-06-22 9627 \
    MACHINERY  1999-09-04 1997-12-11 6439 \
    HOUSEHOLD  1996-03-28 1995-12-29 410 \
    MACHINERY  1995-11-11 1993-01-22 5961 \
    FURNITURE  1999-06-09 1990-09-02 7384 \
    FURNITURE  1994-04-19 1991-06-30 5279 \
    BUILDING   1991-03-28 1990-12-12 9441 \
    MACHINERY  1998-04-11 1995-01-27 3479 \
    \
    >"$(basename "$0").stdout"

if [ -z "$BDCI19_SKIP_DIFF" ]; then
    echo
    diff "$(basename "$0").stdout" "$(basename "$0").result"
fi

