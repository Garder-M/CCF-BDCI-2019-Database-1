#!/bin/bash

set -e

cd "$(dirname "$0")"

time taskset -c 0-15 ../run.sh \
    ../data/customer.txt ../data/orders.txt ../data/lineitem.txt \
    26 \
    BUILDING   1995-03-09 1992-10-17 6601 \
    FURNITURE  1991-05-04 1990-04-16 2027 \
    AUTOMOBILE 1991-04-19 1990-07-13 140 \
    HOUSEHOLD  1998-06-29 1991-03-01 949 \
    HOUSEHOLD  1990-09-26 1990-07-26 6599 \
    FURNITURE  1994-06-27 1994-06-09 5801 \
    MACHINERY  1994-03-20 1991-07-09 5912 \
    AUTOMOBILE 1990-07-29 1990-04-03 9363 \
    BUILDING   1990-07-23 1990-04-20 6745 \
    FURNITURE  1998-06-19 1996-01-06 9087 \
    AUTOMOBILE 1990-10-04 1990-06-11 8794 \
    MACHINERY  1992-11-15 1990-02-24 5139 \
    AUTOMOBILE 1991-03-13 1990-09-04 7021 \
    MACHINERY  1997-06-18 1995-02-10 7667 \
    AUTOMOBILE 1994-02-18 1990-04-22 2403 \
    MACHINERY  1995-11-19 1992-10-07 8658 \
    MACHINERY  1993-09-09 1990-12-12 2566 \
    BUILDING   1990-05-02 1990-03-07 4086 \
    HOUSEHOLD  1996-06-22 1991-12-15 7691 \
    MACHINERY  1991-01-31 1990-08-07 3563 \
    AUTOMOBILE 1992-06-16 1990-05-07 7306 \
    AUTOMOBILE 1992-07-04 1992-05-17 868 \
    MACHINERY  1995-10-28 1995-03-31 6500 \
    FURNITURE  1990-01-03 1990-01-01 9981 \
    HOUSEHOLD  1998-01-21 1990-02-10 9077 \
    MACHINERY  1995-02-19 1992-09-15 2964 \
    \
    >"$(basename "$0").stdout"

if [ -z "$BDCI19_SKIP_DIFF" ]; then
    echo
    diff "$(basename "$0").stdout" "$(basename "$0").result"
fi

